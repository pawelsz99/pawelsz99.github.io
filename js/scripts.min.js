/*!
    Title: Dev Portfolio Template
    Version: 1.2.2
    Last Change: 03/25/2020
    Author: Ryan Fitzgerald
    Repo: https://github.com/RyanFitzgerald/devportfolio-template
    Issues: https://github.com/RyanFitzgerald/devportfolio-template/issues

    Description: This file contains all the scripts associated with the single-page
    portfolio website.
*/
!function (n) {
    n("html").removeClass("no-js"),

        // Handle click event for anchor links
        n("header a").click(function (e) {
            var linkHref = n(this).attr("href");

            // Check if the link is an internal anchor link (e.g., #skills)
            if (linkHref.startsWith("#") && !n(this).hasClass("no-scroll")) {
                e.preventDefault();
                var targetElement = n(linkHref); // Store the target element

                // Check if the target element exists
                if (targetElement.length) {
                    var offsetTop = targetElement.offset().top;
                    n("html, body").animate({
                        scrollTop: offsetTop + "px"
                    }, +Math.abs(window.pageYOffset - offsetTop));
                } else {
                    console.warn("Target element not found for href: " + linkHref);
                }

                // Close the mobile menu if open
                n("header").hasClass("active") && n("header, body").removeClass("active");
            }
            // For external or different page links, let the browser handle it as normal
        }),


        // Scroll to top
        n("#to-top").click(function () {
            n("html, body").animate({
                scrollTop: 0
            }, 500);
        }),

        // Scroll to the next section from the lead section
        n("#lead-down span").click(function () {
            var e = n("#lead").next().offset().top;
            n("html, body").animate({
                scrollTop: e + "px"
            }, 500);
        }),

        // Handle experience timeline rendering
        n("#experience-timeline").each(function () {
            $this = n(this);
            $userContent = $this.children("div");

            // Wrap content with timeline blocks
            $userContent.each(function () {
                n(this).addClass("vtimeline-content").wrap('<div class="vtimeline-point"><div class="vtimeline-block"></div></div>');
            });

            // Add timeline icons
            $this.find(".vtimeline-point").each(function () {
                n(this).prepend('<div class="vtimeline-icon"><i class="fa fa-map-marker"></i></div>');
            });

            // Add timeline dates
            $this.find(".vtimeline-content").each(function () {
                var e = n(this).data("date");
                e && n(this).parent().prepend('<span class="vtimeline-date">' + e + "</span>");
            });
        }),

        // Open mobile menu
        n("#mobile-menu-open").click(function () {
            n("header, body").addClass("active");
        }),

        // Close mobile menu
        n("#mobile-menu-close").click(function () {
            n("header, body").removeClass("active");
        }),

        // View more projects functionality
        n("#view-more-projects").click(function (e) {
            e.preventDefault();
            n(this).fadeOut(300, function () {
                n("#more-projects").fadeIn(300);
            });
        });
}(jQuery);
